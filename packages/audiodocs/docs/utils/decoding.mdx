---
sidebar_position: 1
---

import { Optional, MobileOnly } from '@site/src/components/Badges';

# Decoding

You can decode audio data independently, without creating an AudioContext, using the exported functions [`decodeAudioData`](/docs/utils/decoding#decodeaudiodata) and
[`decodePCMInBase64`](/docs/utils/decoding#decodepcminbase64).

:::warning
Decoding on the web has to be done via `AudioContext` only.
:::

If you already have an audio context, you can decode audio data directly using its [`decodeAudioData`](/docs/core/base-audio-context#decodeaudiodata) function;
the decoded audio will then be automatically resampled to match the context's `sampleRate`.

:::caution
Supported file formats:
- flac
- mp3
- ogg
- opus
- wav
- aac
- m4a
- mp4

Last three formats are decoded with ffmpeg on the mobile, [see for more info](/docs/other/ffmpeg-info).
:::

### `decodeAudioData`

Decodes audio data from either a file path or an ArrayBuffer. The optional `sampleRate` parameter lets you resample the decoded audio;
if not provided, the original sample rate from the file is used.

<table>
  <thead>
    <tr>
      <th align="center">Parameter</th>
      <th align="center">Type</th>
      <th align="center">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td rowspan="3" align="center"><code>input</code></td>
      <td align="center"><code>ArrayBuffer</code></td>
      <td align="center">ArrayBuffer with audio data.</td>
    </tr>
    <tr>
      <td align="center"><code>string</code></td>
      <td align="center">Path to remote or local audio file.</td>
    </tr>
    <tr>
      <td align="center"><code>number</code></td>
      <td align="center">Asset module id. <MobileOnly/> </td>
    </tr>
    <tr>
      <td align="center"><code>sampleRate</code><Optional /></td>
      <td align="center"><code>number</code></td>
      <td align="center">Target sample rate for the decoded audio.</td>
    </tr>
    <tr>
      <td align="center"><code>fetchOptions</code><Optional /></td>
      <td align="center"><code>[RequestInit](https://github.com/facebook/react-native/blob/ac06f3bdc76a9fd7c65ab899e82bff5cad9b94b6/packages/react-native/src/types/globals.d.ts#L265)</code></td>
      <td align="center">Additional headers parameters when passing url to fetch.</td>
    </tr>
  </tbody>
</table>

#### Returns `Promise<AudioBuffer>`.

:::caution
If you are passing number to decode function, bear in mind that it uses Image component provided
by React Native internally. By default only support .mp3, .wav, .mp4, .m4a, .aac audio file formats.
If you want to use other types, refer to [this section](https://reactnative.dev/docs/images#static-non-image-resources) for more info.
:::

<details>
<summary>Example decoding remote URL</summary>
```tsx
import { decodeAudioData } from 'react-native-audio-api';

const url = ... // url to an audio

const buffer = await decodeAudioData(url);
```
</details>

### `decodePCMInBase64`

Decodes base64-encoded PCM audio data.

| Parameter | Type | Description |
|-----------|------|-------------|
| `base64String` | `string` | Base64-encoded PCM audio data. |
| `inputSampleRate` | `number` | Sample rate of the input PCM data. |
| `inputChannelCount` | `number` | Number of channels in the input PCM data. |
| `isInterleaved` <Optional />| `boolean` | Whether the PCM data is interleaved. Default is `true`. |

#### Returns `Promise<AudioBuffer>`


<details>
<summary>Example decoding with data in base64 format </summary>
```tsx
const data = ... // data encoded in base64 string
// data is interleaved (Channel1, Channel2, Channel1, Channel2, ...)
const buffer = await decodeAudioData(data, 4800, 2, true);
```
</details>

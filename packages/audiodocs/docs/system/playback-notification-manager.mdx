---
sidebar_position: 2
---

import {
  Optional,
  ReadOnly,
  OnlyiOS,
  Experimental,
} from '@site/src/components/Badges';

# PlaybackNotificationManager

The `PlaybackNotificationManager` provides media session integration and playback controls for your audio application. It manages system-level media notifications with controls like play, pause, next, previous, and seek functionality.

:::info Platform Differences

**iOS Requirements:**
- Notification controls only appear when an active `AudioContext` is running
- `show()`, `update()` or `hide()` only update metadata - they don't control notification visibility
- The notification automatically appears/disappears based on audio session state
- To show: create and resume an AudioContext
- To hide: suspend or close the AudioContext

**Android:**
- Notification visibility is directly controlled by `show()` and `hide()` methods
- Works independently of AudioContext state

:::

## Example

```tsx
// Register and show notification
await PlaybackNotificationManager.register();
await PlaybackNotificationManager.show({
  title: 'My Song',
  artist: 'My Artist',
  duration: 180,
  state: 'paused',
});

// Listen for notification controls
const playListener = PlaybackNotificationManager.addEventListener(
  'playbackNotificationPlay',
  () => {
    // Handle play action
    PlaybackNotificationManager.update({ state: 'playing' });
  }
);

const pauseListener = PlaybackNotificationManager.addEventListener(
  'playbackNotificationPause',
  () => {
    // Handle pause action
    PlaybackNotificationManager.update({ state: 'paused' });
  }
);

const seekToListener = PlaybackNotificationManager.addEventListener(
  'playbackNotificationSeekTo',
  (event) => {
    // Handle seek to position (event.value is in seconds)
    PlaybackNotificationManager.update({ elapsedTime: event.value });
  }
);

// Update progress
PlaybackNotificationManager.update({ elapsedTime: 60 });

// Cleanup
PlaybackNotificationManager.removeEventListener(playListener);
PlaybackNotificationManager.removeEventListener(pauseListener);
PlaybackNotificationManager.removeEventListener(seekToListener);
PlaybackNotificationManager.unregister();
```

## Methods

### `register`

Register the playback notification with the system. Must be called before showing any notification.

#### Returns `Promise<void>`.

#### Errors

| Error type | Description                                                 |
| :--------: | :---------------------------------------------------------- |
|  `Error`   | NativeAudioAPIModule is not available or registration fails |

### `show`

Display the notification with initial metadata.

:::note iOS Behavior
On iOS, this method only sets the metadata. The notification controls will only appear when an `AudioContext` is actively running. Make sure to create and resume an AudioContext before calling `show()`.
:::

| Parameter |                                               Type                                                | Description                   |
| :-------: | :-----------------------------------------------------------------------------------------------: | :---------------------------- |
|  `info`   | [`PlaybackNotificationInfo`](/docs/system/playback-notification-manager#playbacknotificationinfo) | Initial notification metadata |

#### Returns `Promise<void>`.

#### Errors

| Error type | Description                                                        |
| :--------: | :----------------------------------------------------------------- |
|  `Error`   | Notification must be registered first or native module unavailable |

### `update`

Update the notification with new metadata or state.

:::note iOS Behavior
On iOS, this method only updates the metadata. It does not control notification visibility - controls remain visible as long as the AudioContext is running.
:::

| Parameter |                                               Type                                                | Description                   |
| :-------: | :-----------------------------------------------------------------------------------------------: | :---------------------------- |
|  `info`   | [`PlaybackNotificationInfo`](/docs/system/playback-notification-manager#playbacknotificationinfo) | Updated notification metadata |

#### Returns `Promise<void>`.

### `hide`

Hide the notification. Can be shown again later by calling `show()`.

:::note iOS Behavior
On iOS, this method clears the metadata but does not hide the notification controls. To completely hide controls on iOS, you must suspend or close the AudioContext.
:::

#### Returns `Promise<void>`.

### `unregister`

Unregister the notification from the system. Must call `register()` again to use.

#### Returns `Promise<void>`.

### `enableControl`

Enable or disable specific playback controls.

| Parameter |                                          Type                                           | Description                           |
| :-------: | :-------------------------------------------------------------------------------------: | :------------------------------------ |
| `control` | [`PlaybackControlName`](/docs/system/playback-notification-manager#playbackcontrolname) | The control to enable/disable         |
| `enabled` |                                        `boolean`                                        | Whether the control should be enabled |

#### Returns `Promise<void>`.

### `isActive`

Check if the notification is currently active and visible.

#### Returns `Promise<boolean>`.

### `addEventListener`

Add an event listener for notification actions.

|  Parameter  |                                                    Type                                                     | Description             |
| :---------: | :---------------------------------------------------------------------------------------------------------: | :---------------------- |
| `eventName` | [`PlaybackNotificationEventName`](/docs/system/playback-notification-manager#playbacknotificationeventname) | The event to listen for |
| `callback`  |         [`SystemEventCallback`](/docs/system/audio-manager#systemeventname--remotecommandeventname)         | Callback function       |

#### Returns [`AudioEventSubscription`](/docs/system/audio-manager#audioeventsubscription).

### `removeEventListener`

Remove an event listener.

|   Parameter    |                                     Type                                      | Description                |
| :------------: | :---------------------------------------------------------------------------: | :------------------------- |
| `subscription` | [`AudioEventSubscription`](/docs/system/audio-manager#audioeventsubscription) | The subscription to remove |

## Remarks

### `PlaybackNotificationInfo`

<details>
<summary>Type definitions</summary>
```typescript
interface PlaybackNotificationInfo {
  title?: string;
  artist?: string;
  album?: string;

  // Can be a URL or a local file path relative to drawable resources (Android) or bundle resources (iOS)
  artwork?: string | { uri: string };
  // ANDROID: small icon shown in the status bar
  androidSmallIcon?: string | { uri: string };
  duration?: number;

  // IOS: elapsed time does not update automatically, must be set manually on each state change
  elapsedTime?: number;
  speed?: number;
  state?: 'playing' | 'paused';
}
```
</details>

### `PlaybackControlName`

<details>
  <summary>Type definitions</summary>
  ```typescript
  type PlaybackControlName =
    | 'play'
    | 'pause'
    | 'next'
    | 'previous'
    | 'skipForward'
    | 'skipBackward'
    | 'seekTo';
  ```
</details>

### `PlaybackNotificationEventName`

<details>
  <summary>Type definitions</summary>
```typescript
    interface PlaybackNotificationEvent {
      playbackNotificationPlay: EventEmptyType;
      playbackNotificationPause: EventEmptyType;
      playbackNotificationNext: EventEmptyType;
      playbackNotificationPrevious: EventEmptyType;
      playbackNotificationSkipForward: EventTypeWithValue;
      playbackNotificationSkipBackward: EventTypeWithValue;
      playbackNotificationSeekTo: EventTypeWithValue;
      playbackNotificationDismissed: EventEmptyType;
    }

    type PlaybackNotificationEventName = keyof PlaybackNotificationEvent;
  ```
</details>

```
